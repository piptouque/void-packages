# Template file for 'musescore'
pkgname=musescore
version=4.2.1
revision=1
build_style=cmake
hostmakedepends="cmake pkg-config qt5-host-tools qt5-qmake qt5-tools"
makedepends="
 jack-devel
 lame-devel
 libsndfile-devel
 portaudio-devel
 portmidi-devel
 pulseaudio-devel
 qt5-declarative-devel
 qt5-location-devel
 qt5-networkauth-devel
 qt5-plugin-mysql
 qt5-plugin-odbc
 qt5-plugin-pgsql
 qt5-plugin-sqlite
 qt5-plugin-tds
 qt5-quickcontrols2-devel
 qt5-script-devel
 qt5-svg-devel
 qt5-tools-devel
 qt5-x11extras-devel
 qt5-xmlpatterns-devel
 qt5-webchannel-devel
"
depends="qt5-graphicaleffects qt5-plugin-sqlite qt5-quickcontrols2"
short_desc="Create, play and print beautiful sheet music"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-or-later"
homepage="https://musescore.org/"
_soundfont_url="https://ftp.osuosl.org/pub/musescore/soundfont/MuseScore_General"
distfiles="https://github.com/musescore/MuseScore/archive/v${version}.tar.gz
 ${_soundfont_url}/MuseScore_General.sf3
 ${_soundfont_url}/MuseScore_General_License.md"
checksum="9636b303afdb44228dc6d64dbc14773b60840dec7225602d79b126d97f555680
 5b85b6c2c61d10b2b91cddd41efcce7b25cd31c8271d511c73afafbef20b6fa3
 5ad8d737e13c7f01f5b9674872a82a92b4ba253603e8ed14b9db12293550b4b9"
skip_extraction="MuseScore_General.sf3 MuseScore_General_License.md"

post_extract() {
	cp "${XBPS_SRCDISTDIR}/${pkgname}-${version}/MuseScore_General.sf3" "${wrksrc}/share/sound/"
	cp "${XBPS_SRCDISTDIR}/${pkgname}-${version}/MuseScore_General_License.md" "${wrksrc}/share/sound/"
}

do_build() {
	cmake -P build.cmake -DCMAKE_BUILD_TYPE=Release
}
